<?php
    // print_r($_SESSION['cart']);
?>
<main>
        <!-- heading-cart -->
        <article class="heading-cart">
            <div class="main-content">
                <div class="heading-cart__content row ">
                <svg xmlns="http://www.w3.org/2000/svg" width="211" height="15" viewBox="0 0 211 15" fill="none">
                    <path d="M0 0.113517L0.025855 14.5929H6.34978V9.53904C6.34978 7.60527 10.0314 7.627 10.0314 9.5825V14.5929H16.3553V0.113517H10.0056L10.0314 5.8062C8.52153 5.42814 6.74794 6.33636 6.69623 7.87469H6.34978C6.34978 5.29343 6.32393 2.69478 6.32393 0.113517H0ZM22.1725 14.5712H33.5587V6.0061C33.5587 2.11248 30.7768 0.113517 26.1489 0.113517H19.1579L19.1321 5.96265C19.1321 5.96265 25.3009 6.58841 25.3785 3.0685C25.3785 2.24719 25.063 1.64316 24.5563 1.22164L24.7476 1.00001C26.092 1.5997 26.9711 2.69478 26.909 4.55903V6.67532H22.7827C16.0089 6.67532 15.559 14.5712 22.1725 14.5712ZM26.9711 7.31846V11.2121C27.6795 11.3207 28.2121 11.8335 28.2121 12.4549C28.2121 13.1459 27.5502 13.7021 26.728 13.7021C25.063 13.7021 24.3443 11.5684 24.3701 10.5255C24.396 9.05234 25.456 7.80951 26.9711 7.31846ZM35.141 0.09179V14.5495H42.0492V0.09179H35.141ZM49.2729 0.09179C46.4703 0.09179 43.373 0.422052 43.2127 3.42484C42.9489 8.05286 51.6049 7.11857 51.8997 11.5902C51.8118 13.5717 50.2036 13.9454 48.1611 13.9932L48.0836 13.7455C49.035 13.3023 49.6762 12.6809 49.6503 11.3859C49.5883 7.60527 43.6108 8.27449 43.6108 8.27449L43.6367 14.5495H53.5647C56.6879 14.5495 57.9857 12.9242 58.3011 11.3207C58.6683 9.45213 57.5307 8.07459 55.0952 6.9404C53.301 6.09301 49.9658 5.02835 50.0433 2.91641C50.095 1.06954 52.2151 0.487236 54.1179 0.578493L54.1697 0.82619C53.2492 1.24771 52.5305 1.80394 52.5564 3.0685C52.6081 6.65359 58.2753 6.0061 58.2753 6.0061L58.2494 0.09179H49.2729ZM63.8029 14.5712H75.1891V6.0061C75.1891 2.11248 72.402 0.113517 67.7741 0.113517H60.7831L60.7573 5.96265C60.7573 5.96265 66.9313 6.58841 67.0088 3.0685C67.0088 2.24719 66.6882 1.64316 66.1867 1.22164L66.3728 1.00001C67.7172 1.5997 68.5963 2.69478 68.5394 4.55903V6.67532H64.4079C57.6393 6.67532 57.1843 14.5712 63.8029 14.5712ZM68.5963 7.31846V11.2121C69.3099 11.3207 69.8373 11.8335 69.8373 12.4549C69.8373 13.1459 69.1806 13.7021 68.3584 13.7021C66.6882 13.7021 65.9747 11.5684 66.0005 10.5255C66.0264 9.05234 67.0864 7.80951 68.5963 7.31846ZM83.2246 14.5712V7.4271C83.2246 5.38034 86.2443 5.40207 86.2443 7.47056V14.5712H92.7079V5.44987C92.7079 2.62091 91.9891 0.113517 88.1007 0.0439885C84.6879 -0.0211949 83.6279 2.62091 83.5762 5.18044H83.2246V0.113517H76.6369V14.5712H83.2246ZM100.78 14.5495V7.40537C100.78 5.35861 103.794 5.35861 103.794 7.4271V14.5495H110.253V7.22721C110.253 5.44987 113.19 5.33688 113.19 7.22721V14.5495H119.648V6.18427C119.648 3.5552 119.482 0.09179 115.067 0.000533177C111.628 -0.042923 110.594 2.57745 110.516 5.13699H110.253C110.149 2.73824 109.508 0.09179 105.645 0.000533177C102.233 -0.042923 101.173 2.57745 101.121 5.13699H100.78V0.09179H94.1867V14.5495H100.78ZM121.256 0.09179V14.5495H128.164V0.09179H121.256ZM143.966 6.36244L143.992 0.09179H134.328C129.038 0.09179 128.216 6.0061 133.03 7.24893C128.087 8.49611 128.35 14.5495 134.328 14.5495H143.966L143.992 8.23103C142.663 8.23103 138.015 8.00941 138.066 11.3859C138.066 12.5201 138.62 13.2545 139.416 13.7238L139.282 13.9672C137.399 13.6152 136.21 11.9682 136.236 10.3864C136.288 8.53957 138.247 7.51836 140.445 7.47056V7.02731C137.746 6.96213 136.184 5.09353 136.314 3.38138C136.396 2.09075 137.534 0.913101 139.256 0.665404L139.39 0.913101C138.594 1.37808 138.041 2.11248 138.066 3.24667C138.118 7.02731 143.966 6.36244 143.966 6.36244ZM151.769 14.5712V7.4271C151.769 5.38034 154.789 5.40207 154.789 7.47056V14.5712H161.247V5.44987C161.247 2.62091 160.534 0.113517 156.64 0.0439885C153.227 -0.0211949 152.172 2.62091 152.121 5.18044H151.769V0.113517H145.176V14.5712H151.769ZM166.139 6.38417L166.165 14.5712H172.68L172.654 6.09301H175.7V0.113517H162.669V6.11909C163.89 6.11909 168.549 6.33636 168.497 3.15976C168.471 1.96038 167.809 1.42153 166.935 1.00001L167.039 0.752315C171.858 1.3998 170.56 6.18427 166.139 6.38417ZM181.145 14.5712H192.531V6.0061C192.531 2.11248 189.744 0.113517 185.121 0.113517H178.125L178.099 5.96265C178.099 5.96265 184.273 6.58841 184.351 3.0685C184.351 2.24719 184.035 1.64316 183.528 1.22164L183.715 1.00001C185.059 1.5997 185.938 2.69478 185.881 4.55903V6.67532H181.75C174.981 6.67532 174.526 14.5712 181.145 14.5712ZM185.938 7.31846V11.2121C186.652 11.3207 187.179 11.8335 187.179 12.4549C187.179 13.1459 186.522 13.7021 185.7 13.7021C184.035 13.7021 183.316 11.5684 183.342 10.5255C183.368 9.05234 184.428 7.80951 185.938 7.31846ZM199.486 8.18323C199.062 8.53957 198.772 9.00889 198.772 9.72156V14.5712H205.391V10.6341C205.391 7.58354 210.256 7.83124 210.256 4.51557V0.113517H203.798V4.27222C203.798 6.09301 202.878 7.00558 201.182 7.49228C200.122 7.80951 198.875 7.56181 198.824 6.47108C198.772 5.78448 199.511 5.24997 200.328 5.2717L200.303 0.113517H193.953V4.51557C193.953 7.07511 196.869 8.23103 199.486 8.18323Z" fill="white"/>
                </svg> 
                    <span class="heading-cart__line">|</span>
                    <h2 class="heading-cart__title">Giỏ hàng</h2>
                </div>
            </div>
        </article>


        <article class="cart">
            <div class="main-content">
                <div class="row main-cart">
                    <div class="cart__content">
                        <div class="cart__content--heading row">
                            <div class="cart--heading__left row">
                                <div class="cart--heading__select row">
                                    <input type="checkbox" name="check-all" id="selecctall">
                                    <label for="check-all">Chọn tất cả</label>
                                </div>
                                <div class="cart--heading__favourite row">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="23" viewBox="0 0 28 23"
                                        fill="none" class="icon-favourite">
                                        <path
                                            d="M12.5 22.5L8.53125 18.9375C7.03125 17.5833 5.74459 16.375 4.67125 15.3125C3.59792 14.25 2.7125 13.25 2.015 12.3125C1.3175 11.375 0.807086 10.4688 0.483753 9.59375C0.16042 8.71875 -0.00083012 7.80208 3.21337e-06 6.84375C3.21337e-06 4.88542 0.656253 3.255 1.96875 1.9525C3.28125 0.65 4.91667 -0.000832534 6.875 7.99233e-07C7.95834 7.99233e-07 8.98959 0.229167 9.96875 0.687501C10.9479 1.14583 11.7917 1.79167 12.5 2.625C13.2083 1.79167 14.0521 1.14583 15.0313 0.687501C16.0104 0.229167 17.0417 7.99233e-07 18.125 7.99233e-07C19.8125 7.99233e-07 21.2292 0.473751 22.375 1.42125C23.5208 2.36875 24.3021 3.56167 24.7188 5H22.0625C21.6875 4.16667 21.1354 3.54167 20.4063 3.125C19.6771 2.70833 18.9167 2.5 18.125 2.5C17.0625 2.5 16.1458 2.78667 15.375 3.36C14.6042 3.93333 13.8854 4.68833 13.2188 5.625H11.7813C11.1354 4.6875 10.4008 3.93208 9.5775 3.35875C8.75417 2.78542 7.85334 2.49917 6.875 2.5C5.6875 2.5 4.66125 2.91167 3.79625 3.735C2.93125 4.55833 2.49917 5.59417 2.5 6.8425C2.5 7.53 2.64584 8.22792 2.9375 8.93625C3.22917 9.64458 3.75 10.4625 4.5 11.39C5.25 12.3167 6.27084 13.4 7.5625 14.64C8.85417 15.88 10.5 17.375 12.5 19.125C13.0417 18.6458 13.6771 18.0938 14.4063 17.4688C15.1354 16.8438 15.7188 16.3229 16.1563 15.9063L16.4375 16.1875L17.0475 16.7975L17.6563 17.4063L17.9375 17.6875C17.4792 18.1042 16.8958 18.62 16.1875 19.235C15.4792 19.85 14.8542 20.3967 14.3125 20.875L12.5 22.5ZM21.25 17.5V13.75H17.5V11.25H21.25V7.5H23.75V11.25H27.5V13.75H23.75V17.5H21.25Z"
                                            fill="#F24E1E" />
                                    </svg>

                                    <span class="cart__favourite--title">Lưu vào mục yêu thích</span>
                                </div>
                            </div>
                            <div class="cart--heading__desc row">
                                <p class="cart__desc--handel">Số lượng</p>
                                <p class="cart__desc--pice">Đơn giá</p>
                                <p class="cart__desc--operation">Thao tác</p>
                            </div>
                        </div>
                        <!-- cart-items -->
                        <?php
                            // $listCarts=$_SESSION['cart'];  
                            if(isset($_SESSION['cart'])&&is_array($_SESSION['cart']))  {
                                $ship=25000;
                                $idCart= 0;
                                $total_qty=0;
                                $quantyty = 0;
                                $index = 0;
                                foreach ($_SESSION['cart'] as $item) {
                                    extract($item);
                                    $linkProduct = 'index.php?page=product&idProduct='.$idProduct;
                                    $index++;
                                    echo '
                                    <div class="cart__content--item">
                                    <div class="cart--item__nav">
                                        <ul class="cart__nav row">
                                            <li class="row">Danh mục: <span class="cart__nav--li__catalog">'.$nameCata.'</span>
                                            </li>
                                            <li class="cart__nav--li row">
                                                <p>ngày thêm: 04-10/2026</p>
                                                <p>trạng thái: <span>còn hàng</span></p>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="cart--item__box row">
                                        <input type="checkbox" name="check-all" id="" class="checkbox1">
                                        
                                        <a href="'.$linkProduct.'"><img src="./assets/img/img_main/'.$imgPro.'.png" alt="" class="cart--item__box--img"></a>
                                        <div class="cart--item__desc">
                                            <div class="cart--desc__title">'.$namePro.'</div>
                                            <div class="cart--desc__classly">
                                                Phân loại: '.$typePro.'
                                            </div>
                                            <div class="cart--desc__pice">Giá: '.number_format($pricePro,0,",",".").'</div> 
                                            <div class="cart--desc-trash">
                                                
                                            </div>
                                        </div>
                                        <div class="cart--hendel row">
                                            
                                            <a onclick="hendelReduxQtyProdct(this)">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 16 15"
                                                    fill="none">
                                                    <path d="M11.8856 5.25L7.96606 11.4093L4.04648 5.25L11.8856 5.25Z"
                                                        fill="#C0C0C0" stroke="black" stroke-width="0.5" />
                                                </svg>
                                            </a>
                                            
                                            <input type="number" value="'.$qtyPro.'" name="qty" min="1" max="'.$qty.'" id="inputMax" readonly>
                                            <input type="hidden" value="'.$idCart.'" name="index" >
                                            <input type="hidden" value="'.$pricePro.'" name="index" id="price">
                                            <a onclick="hendelPlusQtyProdct(this)">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 16 15"
                                            fill="none">
                                            <path d="M4.04648 9.75L7.96606 3.59066L11.8856 9.75H4.04648Z" fill="#C0C0C0"
                                            stroke="black" stroke-width="0.5" />            
                                            </svg>
                                            
                                            </a>
                                            <input type="hidden" value="'.$total.'" name="index" id="price">

                                        </div>
                                       
                                        <div  class="cart-total">'.number_format($total,0,",",".").'đ</div>
                                       
                                       
                                        <div class="cart-operation"><a href="'.$linkDeleCart.'">xóa</a></div>
                                    </div>
                                </div>
                                    ';
                                   
                                    $idCart++;
                                    $total_qty += $total;
                                    $quantyty += $qtyPro;
                                }
                               
                            }

                        ?>
                    </div>
                    <div class="cart--qty">
                        <div class="temporary">
                            <div class="temporary-content  row">
                                <span>Tạm tính</span>
                                <strong><?php if(isset($total_qty)){ echo number_format($total_qty,0,",",".");}else{ echo $total_qty=0;}?></strong>
                            </div>
                            <div class="temporary-content  row">
                                <span>Phí vận chuyển tạm tính</span>
                                <strong><?php if($total_qty==0){ echo $ship=0;}else{echo $ship;}?></strong>
                            </div>
                            <!-- <div class="temporary-content  row">
                                <span>Voucher</span>
                                <strong><input type="text"
                                        style="width: 50px; display: flex; justify-content: left;"></strong>
                            </div> -->
                            <div class="total__order row">
                                <div class="total__order--title">Tổng tiền</div>
                                <div class="total__order--pice"><?php if(isset($total_qty)&&isset($ship)){ echo number_format($total_qty + $ship,0,",",".");}else{echo 0;}?>đ</div>
                            </div>
                        </div>
                        <a href="index.php?page=payMent" class="cart__pay btn">Tiến hành đặt hàng</a>
                    </div>
                </div>


            </div>
        </article>

        <div class=" popular">
            <div class="main-content">
                <div class="popular-top">
                    <div class="info">
                        <h2 class="heading lv2">Sản phẩm mới</h2>
                        <p class="desc">
                            Cùng mua Hải sản với giá sốc nào.
                        </p>
                    </div>
                    <div class="controls">
                        <button class="control-btn">
                            <svg width="8" height="14" viewBox="0 0 8 14" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 1L1 7L7 13" stroke="currentColor" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="control-btn">
                            <svg width="8" height="14" viewBox="0 0 8 14" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 1L7 7L1 13" stroke="currentColor" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="course-list">
                    <!-- Course item 1 -->
                    <?=showProduct($listItemLimitRanDom)?>
                    
                </div>
            </div>
        </div>
    </main>